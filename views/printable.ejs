<html>

<head>
    <script src="jquery-3.1.1.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="ejs.js"></script>
    <link rel="stylesheet" href="jquery-ui.min.css">
    <script src="jquery.js"></script>
    <script src="jquery-ui.min.js"></script>
</head>
<style>
    /*formatting for print-table div (printable.ejs)*/
    div #print-table {
        white-space: pre;
    }
</style>

<body>
    <!--table-->
    <div id="main-table"></div>
</body>

<script type="text/javascript">
    //run script once the document is fully loaded
    $(document).ready(function() {
        //define some data from sent json data from nodejs server
        var tabledata = <%- JSON.stringify(jsondata) %>
        var columndata = <%- JSON.stringify(columns['col']) %>
        var content = "<table border='1'>"

        //create the column names
        for (i = 1; i < columndata.length; i++) {
            content += '<td>' + JSON.stringify(columndata[i]).replace(/['"]+/g, '') + '</td>';
        }

        //populate and create the column cells/data
        for (i = 0; i < tabledata.length; i++) { //loop by row
            content += '<tr>';
            for (x = 1; x < columndata.length; x++) { //loop by column of current row
                content += '<td>' + (JSON.stringify(tabledata[i][columndata[x]])).replace(/['"]+|\\r/g, '').replace(/\\n\\n/g, '<br />') + '</td>';
            }
            content += '</tr>';
        }
        content += "</table>"

        $('#main-table').append(content);
    });
</script>

</html>